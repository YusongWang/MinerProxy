(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b68433d"],{5905:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"log"},[o("div",{staticClass:"title"},[o("div",[o("svg-icon",{attrs:{"icon-class":"log"}}),o("span",[t._v(t._s(t.$t("log.title")))])],1)]),o("div",{staticClass:"log-content"},[o("div",{staticClass:"log-box"},t._l(t.list,(function(e,s){return o("p",{key:s,staticClass:"log-text"},[t._v(t._s(e))])})),0)])])},n=[],c={name:"index",data:function(){return{scrollTarget:null,list:[],lockReconnect:!1,timeout:58e3,timeoutObj:null,serverTimeoutObj:null,timeoutnum:null,websock:null}},created:function(){this.initWebSocket()},destroyed:function(){this.websock.close(),clearInterval(this.timer)},methods:{scrollToBottom:function(){setTimeout((function(){var t=document.querySelector(".log-box");t.scrollTop=t.scrollHeight}),300)},initWebSocket:function(){var t="ws://api.wangyusong.com:9999/logger";this.websock=new WebSocket(t),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){this.start()},websocketonerror:function(){console.log("出现错误"),this.reconnect()},websocketonmessage:function(t){var e=this;this.list.push(t.data),this.$nextTick((function(t){e.scrollToBottom()})),this.reset()},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){console.log("断开连接",t),this.reconnect()},reconnect:function(){var t=this;t.lockReconnect||(t.lockReconnect=!0,t.timeoutnum&&clearTimeout(t.timeoutnum),t.timeoutnum=setTimeout((function(){t.initWebSocket(),t.lockReconnect=!1}),5e3))},reset:function(){var t=this;clearTimeout(t.timeoutObj),clearTimeout(t.serverTimeoutObj),t.start()},start:function(){console.log("开启心跳");var t=this;t.timeoutObj&&clearTimeout(t.timeoutObj),t.serverTimeoutObj&&clearTimeout(t.serverTimeoutObj),t.timeoutObj=setTimeout((function(){console.log(),1==t.ws.readyState||t.reconnect(),t.serverTimeoutObj=setTimeout((function(){t.ws.close()}),t.timeout)}),t.timeout)}}},i=c,l=(o("aec4"),o("2877")),u=Object(l["a"])(i,s,n,!1,null,"7b44c8b4",null);e["default"]=u.exports},"9abd":function(t,e,o){},aec4:function(t,e,o){"use strict";o("9abd")}}]);