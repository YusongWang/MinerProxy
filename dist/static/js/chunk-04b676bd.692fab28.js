(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04b676bd"],{"0087":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"setting password"},[s("div",{staticClass:"title"},[s("div",[s("svg-icon",{attrs:{"icon-class":"setting"}}),s("span",[t._v(t._s(t.$t("setting.password.title")))])],1)]),s("div",{staticClass:"setting-content"},[s("el-form",{ref:"passwordForm",attrs:{model:t.form,rules:t.rules,"label-width":"160px"},nativeOn:{submit:function(t){t.preventDefault()}}},[s("el-form-item",{staticClass:"setting-basic-form-item",attrs:{label:t.$t("setting.password.oldPassword"),prop:"password"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:t.$t("pleaseEnter",{name:t.$t("setting.password.oldPassword")}),type:t.passwordType.password},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),s("div",{staticClass:"form-item-after"},[s("span",{staticClass:"show-pwd",on:{click:function(e){return t.showPwd("password")}}},[s("svg-icon",{attrs:{"icon-class":"password"===t.passwordType.password?"eye":"eye-open"}})],1)])],1),s("el-form-item",{staticClass:"setting-basic-form-item",attrs:{label:t.$t("setting.password.newPassword"),prop:"newPassword"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:t.$t("pleaseEnter",{name:t.$t("setting.password.newPassword")}),type:t.passwordType.newPassword},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}}),s("div",{staticClass:"form-item-after"},[s("span",{staticClass:"show-pwd",on:{click:function(e){return t.showPwd("newPassword")}}},[s("svg-icon",{attrs:{"icon-class":"password"===t.passwordType.newPassword?"eye":"eye-open"}})],1)])],1),s("el-form-item",{staticClass:"setting-basic-form-item",attrs:{label:t.$t("setting.password.newPasswordTwo"),prop:"newPasswordTwo"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:t.$t("pleaseEnter",{name:t.$t("setting.password.newPasswordTwo")}),type:t.passwordType.newPasswordTwo},model:{value:t.form.newPasswordTwo,callback:function(e){t.$set(t.form,"newPasswordTwo",e)},expression:"form.newPasswordTwo"}}),s("div",{staticClass:"form-item-after"},[s("span",{staticClass:"show-pwd",on:{click:function(e){return t.showPwd("newPasswordTwo")}}},[s("svg-icon",{attrs:{"icon-class":"password"===t.passwordType.newPasswordTwo?"eye":"eye-open"}})],1)])],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v(t._s(t.$t("save")))]),s("el-button",{on:{click:t.onReset}},[t._v(t._s(t.$t("reset")))])],1)],1)],1)])},r=[],n=s("1da1"),o=(s("96cf"),s("d9e2"),s("ac1f"),s("00b4"),s("e9c4"),s("96f1")),i=s("90e7"),c=/^(?:\d|[a-zA-Z]|[!@#$%^&*]){6,18}$/,l={name:"index",components:{UploadCertificate:o["a"]},data:function(){var t=this,e=function(e,s,a){s||a(new Error(t.$t("setting.password.validateError3"))),c.test(s)||a(new Error(t.$t("setting.password.validateError1"))),a()},s=function(e,s,a,r){s||a(new Error(t.$t("pleaseEnter",{name:t.$t("setting.password.newPassword")}))),c.test(s)||a(new Error(t.$t("setting.password.validateError1"))),s!==r&&a(new Error(t.$t("setting.password.validateError2"))),a()};return{passwordType:{password:"password",newPassword:"password",newPasswordTwo:"password"},form:{password:null,newPassword:null,newPasswordTwo:null},rules:{password:[{required:!0,message:this.$t("setting.password.validateError4"),trigger:"blur"}],newPassword:[{required:!0,validator:e,trigger:"blur"}],newPasswordTwo:[{required:!0,validator:function(e,a,r){return s(e,a,r,t.form.newPassword)},trigger:"blur"}]},loading:!1}},methods:{onSave:function(){var t=this;this.$refs.passwordForm.validate((function(e){if(!e)return!1;t.loading=!0,t.save()}))},save:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.form,a=s.password,r=s.newPassword,e.next=3,Object(i["a"])({oldpass:a,pass:r});case 3:n=e.sent,o=n.code,200===o&&(t.$message.success(t.$t("saveSuccess")),t.onReset()),t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},showPwd:function(t){var e=JSON.parse(JSON.stringify(this.passwordType));e[t]="password"===e[t]?"":"password",this.passwordType=Object.assign({},e)},onReset:function(){this.$refs.passwordForm.resetFields()}}},d=l,p=(s("36e3"),s("2877")),u=Object(p["a"])(d,a,r,!1,null,null,null);e["default"]=u.exports},"2b0c":function(t,e,s){t.exports={menuText:"rgba(229,224,216,.85)",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#242525",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"0px"}},"36e3":function(t,e,s){"use strict";s("2b0c")},"79e6":function(t,e,s){},"90e7":function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return i}));var a=s("1da1"),r=(s("96cf"),s("b775"));function n(t){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])({url:"/api/setport",method:"post",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}function i(t){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])({url:"/api/setpass",method:"post",data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}},"96f1":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upload-certificate"},[s("el-button",{attrs:{icon:"el-icon-upload",size:"mini"},on:{click:function(e){t.visible=!0}}},[t._v(t._s(t.$t("setting.uploadCertificate")))]),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.$t("setting.uploadCertificate"),visible:t.visible,center:""},on:{"update:visible":function(e){t.visible=e}}},[s("div",{staticClass:"dialog-upload-box"},[s("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[s("el-step",{attrs:{title:t.$t("setting.uploadCertificate")}}),s("el-step",{attrs:{title:t.$t("setting.uploadKey")}}),s("el-step",{attrs:{title:t.$t("setting.process")}})],1),s("div",{staticClass:"step-content"},[t.active<2?[s("el-upload",{staticClass:"upload-demo",attrs:{drag:"","show-file-list":!1,accept:t.accept,action:"#","http-request":function(e){return t.onUploadAction(e,t.active)}}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[s("span",[t._v(t._s(t.acceptText))]),s("span",{domProps:{innerHTML:t._s(t.$t("setting.uploadTip"))}})])])]:t._e(),2===t.active?[s("div",{class:{result:!0,error:!t.success}},[s("i",{class:{"el-icon-circle-check":t.success,"el-icon-circle-close":!t.success}}),s("span",[t._v(t._s(t.$t("setting.upload"))+t._s(this.$t("setting."+(t.success?"uploadStatus.success":"uploadStatus.error"))))])])]:t._e()],2)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.handleCancel}},[t._v(t._s(t.$t("cancel")))]),2===t.active?s("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v(t._s(t.$t("confirm")))]):t._e()],1)])],1)},r=[],n={name:"UploadCertificate",data:function(){return{visible:!1,loading:!1,active:0,success:Boolean((new Date).getTime()%2)}},watch:{visible:{immediate:!0,handler:function(){this.success=Boolean((new Date).getTime()%2)}}},computed:{accept:function(){return 0===this.active?".crt,application/pkix-cert,application/x-x509-ca-cert,application/x-x509-user-cert,.pem,application/x-pem-file,.cert,application/pkix-cert":".key,application/pkcs8"},acceptText:function(){return 0===this.active?this.$t("setting.acceptA"):this.$t("setting.acceptB")}},methods:{handleCancel:function(){this.visible=!1,this.loading=!1,this.active=0},handleSave:function(){this.handleCancel()},onError:function(t){this.$message.error(this.$t("setting.uploadStatus.error"))},onSuccess:function(t){console.log(t)},onUploadAction:function(t,e){1===this.active&&this.upload(e),this.active=e+1},upload:function(t){var e=this;this.loading=!0,setTimeout((function(){e.success?e.$message.success(e.$t("setting.uploadStatus.success")):e.$message.error(e.$t("setting.uploadStatus.error")),e.loading=!1}),1e3)}}},o=n,i=(s("d363"),s("2877")),c=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},d363:function(t,e,s){"use strict";s("79e6")}}]);